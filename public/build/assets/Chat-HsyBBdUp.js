import{u as m,e as d,r as l,E as x,j as e,k as g}from"./app-DAlFUNO8.js";import{h}from"./moment-BH_gi4k_.js";const p=({selectedUser:a})=>{const r=m(),c=d(s=>s.messages.messages),[n,i]=l.useState(""),t=l.useRef(null);l.useEffect(()=>{a&&r(x(a.id))},[a,r]),l.useEffect(()=>{t.current&&(t.current.scrollTop=t.current.scrollHeight)},[c]);const o=async()=>{if(!n.trim())return;const s={receiver_email:a.email,message:n};r(g(s)).then(()=>{i("")})};return e.jsxs("div",{className:"flex flex-col h-full p-4 bg-gray-100",children:[e.jsx("div",{className:"bg-blue-600 text-white p-4",children:e.jsx("h2",{className:"text-lg font-semibold",children:a.name})}),e.jsx("div",{className:"flex-grow overflow-y-auto p-2",style:{display:"flex",flexDirection:"column"},ref:t,children:c.map(s=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:`inline-block max-w-[70%] p-2 my-2 rounded-lg ${s.sender_id===a.id?"bg-blue-500 text-white self-start":"bg-gray-300 text-black self-end"}`,children:[e.jsx("p",{className:"whitespace-normal break-words",children:s.message}),e.jsx("small",{className:"block pt-0 text-xs opacity-80",children:h(s.created_at).format("MMMM Do YYYY, h:mm:ss a")})]},s.id)}))}),e.jsxs("div",{className:"flex items-center p-2 bg-white",children:[e.jsx("input",{type:"text",className:"flex-grow p-2 border rounded-lg",value:n,onChange:s=>i(s.target.value),placeholder:"Type a message..."}),e.jsx("button",{onClick:o,className:"ml-2 px-4 py-2 bg-blue-500 text-white rounded-lg",children:"Send"})]})]})};export{p as default};
