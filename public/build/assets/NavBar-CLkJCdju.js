import{j as e,R as w,u as k,r as o,d as l,N as A,e as v,J as D,W as L,K as O,O as T,P as U}from"./app-pcpPOzh4.js";import{AppContainer as F,NotificationModalContainer as H,NoNotificationsMessage as B,NavContainer as V,Logo as W,Divider as _,IconButton as p,Icon as j,IconContainer as $,Footer as K,CloseButton as J,Main as Q,ContentContainer as Z,LoadingDot as q,HeaderContainer as G,Title as X,UserProfile as Y,NotificationIcon as ee,UserDetails as te,Avatar as N,ExpandIcon as se,Modal as ne,ModalContent as ie,ModalItem as C}from"./NavBar.styles-bKlC7kf5.js";import{l as ae,b as oe,m as re,c as ce,u as le,s as de}from"./settings-UVqU3YHX.js";import{F as M}from"./index.es-n2NVWXFw.js";import{a as fe,b as ue,c as he}from"./index-BMRxO3cL.js";import"./styled-components.browser.esm-Cye39UAp.js";import"./index-Bn4jQ2MY.js";const xe="/build/assets/applications-QPhI4ZMb.svg";function S(){const[s,n]=o.useState({width:void 0,height:void 0});return o.useEffect(()=>{function t(){n({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]),s}function z(){const[s,n]=o.useState("/");o.useEffect(()=>{const d=window.location.pathname;n(d)},[]);const t=d=>{n(d)},[r,f]=o.useState(!1),u=()=>{f(!r)},h=()=>{f(!1)};return e.jsxs("aside",{children:[e.jsxs(V,{children:[e.jsx(l,{href:"/",onClick:()=>t("/"),children:e.jsx(W,{src:ae,alt:"Logo",loading:"lazy",active:s==="/"})}),e.jsx(_,{}),e.jsx(l,{href:"/student/home",onClick:()=>t("/student/home"),children:e.jsx(p,{active:s==="/student/home",children:e.jsx(j,{src:oe,alt:"Home Icon",loading:"lazy"})})}),e.jsx(l,{href:"/student/messages",onClick:()=>t("/student/messages"),children:e.jsx(p,{active:s==="/student/messages",children:e.jsx(j,{src:re,alt:"Messages Icon",loading:"lazy"})})}),e.jsx(l,{href:"/student/interviews",onClick:()=>t("/student/interviews"),children:e.jsx(p,{active:s==="/student/interviews",children:e.jsx(j,{src:ce,alt:"Interviews Icon",loading:"lazy"})})}),e.jsx(l,{href:"/student/viewapplications",onClick:()=>t("/student/viewapplications"),children:e.jsx(p,{active:s==="/student/viewapplications",children:e.jsx(j,{src:xe,alt:"Applications Icon",loading:"lazy"})})}),e.jsx(l,{href:"/student/profile",onClick:()=>t("/student/profile"),"data-test-id":"profile-link",children:e.jsx(p,{active:s==="/student/profile",children:e.jsx(j,{src:le,alt:"Profile Icon",loading:"lazy"})})}),e.jsx(l,{href:"/student/settings",onClick:()=>t("/student/settings"),children:e.jsx(p,{active:s==="/student/settings",children:e.jsx(j,{src:de,alt:"Settings Icon",loading:"lazy"})})}),e.jsx($,{onClick:u,children:e.jsx(M,{icon:fe,className:"fa-icon"})})]}),e.jsxs(K,{isVisible:r,children:[e.jsx(J,{onClick:h,children:e.jsx(M,{icon:ue})}),e.jsxs("p",{children:["HTML Sitemap: ",e.jsx("a",{href:"/",children:"Home"})," |"," ",e.jsx("a",{href:"/about",children:"About"})," |"," ",e.jsx("a",{href:"/student/home",children:"Dashboard"})," |"," ",e.jsx("a",{href:"/student/messages",children:"Messages"})," |"," ",e.jsx("a",{href:"/student/interviews",children:"Calendar"})," |"," ",e.jsx("a",{href:"/student/viewapplications",children:"Applications"})," |"," ",e.jsx("a",{href:"/student/profile",children:"Profile"})," |"," ",e.jsx("a",{href:"/student/settings",children:"Settings"})," |"," "]})]})]})}function pe({header:s}){const n=k(),t=v(D),r=v(a=>a.notifications.notifications),f=v(a=>a.notifications.unreadCount),u=o.useRef(),h=o.useRef(),d=o.useRef(),i=o.useRef(),[x,g]=w.useState(!1),[c,b]=w.useState(!1);w.useState(!1);const{post:I}=L(),y="https://cdn.builder.io/api/v1/image/assets/TEMP/c449c761188f38db922c89455e070256b822a267e33f51baa6901c76b73a4e78?apiKey=d66532d056b14640a799069157705b77&";o.useEffect(()=>{n(O())},[n]),o.useEffect(()=>{n(T())},[n]),o.useEffect(()=>{const a=m=>{u.current&&!u.current.contains(m.target)&&!d.current.contains(m.target)&&g(!1),h.current&&!h.current.contains(m.target)&&!i.current.contains(m.target)&&b(!1)};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[]);const E=a=>{a.stopPropagation(),g(!x),b(!1)},R=a=>{a.stopPropagation(),n(U()),b(!c),g(!1)},P=a=>{a.preventDefault(),I(route("logout"))};return t?e.jsx("header",{children:t&&e.jsxs(G,{"data-testid":"nav-student-component",children:[e.jsx(X,{children:s}),e.jsxs(Y,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(ee,{"data-testid":"nav-student-notification",onClick:R,ref:i,children:e.jsx(M,{icon:he})}),f>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-purple-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:f}),e.jsx(ge,{isOpen:c,ref:h,currentUser:t,notifications:r})]}),e.jsxs("div",{className:"relative",children:[e.jsxs(te,{onClick:E,ref:d,children:[t&&t.profile_image?e.jsx(N,{src:t.profile_image,alt:"User Avatar",loading:"lazy"}):e.jsx(N,{src:y,alt:"Default Avatar",loading:"lazy"}),e.jsx(se,{src:"https://cdn.builder.io/api/v1/image/assets/TEMP/c7749e10a4cb727e5ce0c7fd48d44fb683bf93b2fa7c59643148748496b286b0?apiKey=d66532d056b14640a799069157705b77&",alt:"Expand",loading:"lazy",isOpen:x})]}),e.jsx(ne,{isOpen:x,ref:u,children:e.jsxs(ie,{children:[e.jsx("div",{className:"p-1 border-b",children:e.jsx(l,{href:"/student/profile",children:e.jsx(C,{children:"Profile"})})}),e.jsx("div",{className:"p-1 border-b",children:e.jsx(l,{href:"/student/settings",children:e.jsx(C,{children:"Settings"})})}),e.jsx(C,{as:"button",onClick:P,children:"Logout"})]})})]})]})]})}):q}function je({header:s,children:n}){const r=S().width<=991;return e.jsx(Q,{children:e.jsxs(Z,{children:[e.jsx(pe,{header:s}),r&&e.jsx(z,{}),n]})})}function ke({header:s,children:n}){const r=S().width<=991;return e.jsxs(F,{children:[r?null:e.jsx(z,{}),e.jsx(je,{header:s,children:n})]})}const ge=w.forwardRef(({isOpen:s,notifications:n,currentUser:t},r)=>{const f=i=>{const x=new Date(i),c=Math.floor((new Date-x)/1e3);return c<60?`${c}s ago`:c<3600?`${Math.floor(c/60)}m ago`:c<86400?`${Math.floor(c/3600)}h ago`:`${Math.floor(c/86400)}d ago`},u=k(),h=async i=>{u(A(i))},d=i=>{switch(i){case"message":window.location.href="/student/messages";break;case"viewapplications":window.location.href="/student/viewapplications";break;default:console.warn("Unknown redirect path:",i)}};return e.jsx(H,{isOpen:s,ref:r,"data-testid":"notification-modal",children:n.length>0?n.map(i=>e.jsxs("div",{className:"p-4 border-b",onClick:()=>d(i.data.redirect),children:[e.jsx("button",{onClick:x=>{x.stopPropagation(),h(i.id)},className:"flex justify-self-end text-xs text-gray-400 hover:text-purple-500 transition",children:"âœ•"}),e.jsxs("div",{className:"text-purple-700 flex justify-between items-center",children:[e.jsx("p",{className:"font-semibold",children:i.data.sender_name}),e.jsx("span",{className:"text-xs text-purple-400 ml-2 whitespace-nowrap",children:f(i.created_at)})]}),e.jsx("p",{className:"text-purple-400 truncate max-w-xs text-sm",children:i.data.message})]},i.id)):e.jsx(B,{children:"No new notifications"})})});export{ke as default};
