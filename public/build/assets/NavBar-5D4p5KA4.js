import{j as e,R as w,u as M,r as a,d as f,N as A,e as b,J as L,W as D,K as O,O as T,P as U}from"./app-BP2DlbBf.js";import{AppContainer as F,NotificationModalContainer as H,NoNotificationsMessage as $,NavContainer as B,Logo as V,Divider as W,IconButton as u,Icon as j,IconContainer as _,Footer as K,CloseButton as J,Main as q,ContentContainer as G,LoadingDot as Q,HeaderContainer as X,Title as Y,UserProfile as Z,NotificationIcon as ee,UserDetails as se,Avatar as C,ExpandIcon as te,Modal as oe,ModalContent as ne,ModalItem as v}from"./NavBar.styles-gKPQgFy_.js";import{l as ie,b as ae,m as re,c as le,u as ce,s as de}from"./settings-UVqU3YHX.js";import{F as N}from"./index.es-Cq2d97-S.js";import{a as fe,b as he,c as pe}from"./index-BMRxO3cL.js";import"./styled-components.browser.esm-WlhnpHHw.js";import"./index-DUoLStMl.js";function S(){const[o,t]=a.useState({width:void 0,height:void 0});return a.useEffect(()=>{function n(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]),o}function E(){const[o,t]=a.useState("/"),[n,l]=a.useState(!1),r=d=>{t(d)};a.useEffect(()=>{const d=window.location.pathname,s=d.split("/");s[s.length-1],t(d)},[]);const h=()=>{l(!n)},p=()=>{l(!1)};return e.jsxs("aside",{children:[e.jsxs(B,{children:[e.jsx(f,{href:"/",onClick:()=>r("/"),children:e.jsx(V,{src:ie,alt:"Logo",loading:"lazy",active:o==="/"})}),e.jsx(W,{}),e.jsx(f,{href:"/employer/home",onClick:()=>r("/employer/home"),children:e.jsx(u,{active:o==="/employer/home",children:e.jsx(j,{src:ae,alt:"Icon 1",loading:"lazy"})})}),e.jsx(f,{href:"/employer/messages",onClick:()=>r("/employer/messages"),children:e.jsx(u,{active:o==="/employer/messages",children:e.jsx(j,{src:re,alt:"",loading:"lazy"})})}),e.jsx(f,{href:"/employer/interviews",onClick:()=>r("/employer/interviews"),children:e.jsx(u,{active:o==="/employer/interviews",children:e.jsx(j,{src:le,alt:"",loading:"lazy"})})}),e.jsx(f,{href:"/employer/profile",onClick:()=>r("/employer/profile"),"data-test-id":"profile-link",children:e.jsx(u,{active:o==="/employer/profile",children:e.jsx(j,{src:ce,alt:"",loading:"lazy"})})}),e.jsx(f,{href:"/employer/settings",onClick:()=>r("/employer/settings"),children:e.jsx(u,{active:o==="/employer/settings",children:e.jsx(j,{src:de,alt:"",loading:"lazy"})})}),e.jsx(_,{onClick:h,children:e.jsx(N,{icon:fe,className:"fa-icon"})})]}),e.jsxs(K,{isVisible:n,children:[e.jsx(J,{onClick:p,children:e.jsx(N,{icon:he})}),e.jsxs("p",{children:["HTML Sitemap: ",e.jsx("a",{href:"/",children:"Home"})," |"," ",e.jsx("a",{href:"/about",children:"About"})," |"," ",e.jsx("a",{href:"/employer/home",children:"Employer Home"})," |"," ",e.jsx("a",{href:"/employer/messages",children:"Employer Messages"})," |"," ",e.jsx("a",{href:"/employer/interviews",children:"Employer Schedule"})," |"," ",e.jsx("a",{href:"/employer/profile",children:"Employer Profile"})," |"," ",e.jsx("a",{href:"/employer/settings",children:"Employer Settings"})," "]})]})]})}function me({header:o}){const t=M(),n=b(L),l=b(i=>i.notifications.notifications),r=b(i=>i.notifications.unreadCount),h=a.useRef(),p=a.useRef(),d=a.useRef(),s=a.useRef(),[m,x]=w.useState(!1),[c,y]=w.useState(!1);w.useState(!1);const{post:k}=D(),z="https://cdn.builder.io/api/v1/image/assets/TEMP/c449c761188f38db922c89455e070256b822a267e33f51baa6901c76b73a4e78?apiKey=d66532d056b14640a799069157705b77&";a.useEffect(()=>{t(O())},[t]),a.useEffect(()=>{t(T()).then(()=>{})},[t]),a.useEffect(()=>{const i=g=>{h.current&&!h.current.contains(g.target)&&!d.current.contains(g.target)&&x(!1),p.current&&!p.current.contains(g.target)&&!s.current.contains(g.target)&&y(!1)};return document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[]);const R=i=>{i.stopPropagation(),x(!m),y(!1)},I=i=>{i.stopPropagation(),t(U()),y(!c),x(!1)},P=i=>{i.preventDefault(),k(route("logout"))};return n?e.jsx("header",{children:n&&e.jsxs(X,{"data-testid":"nav-student-component",children:[e.jsx(Y,{children:o}),e.jsxs(Z,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(ee,{"data-testid":"nav-student-notification",onClick:I,ref:s,children:e.jsx(N,{icon:pe})}),r>0&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-purple-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:r}),e.jsx(ue,{isOpen:c,ref:p,currentUser:n,notifications:l})]}),e.jsxs("div",{className:"relative",children:[e.jsxs(se,{onClick:R,ref:d,children:[n&&n.profile_image?e.jsx(C,{src:n.profile_image,alt:"User Avatar",loading:"lazy"}):e.jsx(C,{src:z,alt:"Default Avatar",loading:"lazy"}),e.jsx(te,{src:"https://cdn.builder.io/api/v1/image/assets/TEMP/c7749e10a4cb727e5ce0c7fd48d44fb683bf93b2fa7c59643148748496b286b0?apiKey=d66532d056b14640a799069157705b77&",alt:"Expand",loading:"lazy",isOpen:m})]}),e.jsx(oe,{isOpen:m,ref:h,children:e.jsxs(ne,{children:[e.jsx("div",{className:"p-1 border-b",children:e.jsx(f,{href:"/employer/profile",children:e.jsx(v,{children:"Profile"})})}),e.jsx("div",{className:"p-1 border-b",children:e.jsx(f,{href:"/employer/settings",children:e.jsx(v,{children:"Settings"})})}),e.jsx(v,{as:"button",onClick:P,children:"Logout"})]})})]})]})]})}):Q}function xe({header:o,children:t}){const l=S().width<=991;return e.jsx(q,{children:e.jsxs(G,{children:[e.jsx(me,{header:o}),l&&e.jsx(E,{}),t]})})}function Ce({header:o,children:t}){const l=S().width<=991;return e.jsxs(F,{children:[l?null:e.jsx(E,{}),e.jsx(xe,{header:o,children:t})]})}const ue=w.forwardRef(({isOpen:o,notifications:t,currentUser:n},l)=>{const r=s=>{const m=new Date(s),c=Math.floor((new Date-m)/1e3);return c<60?`${c}s ago`:c<3600?`${Math.floor(c/60)}m ago`:c<86400?`${Math.floor(c/3600)}h ago`:`${Math.floor(c/86400)}d ago`},h=M(),p=async s=>{h(A(s))},d=s=>{if(!isNaN(s)){window.location.href=`/employer/viewapplicants/${s}`;return}switch(s){case"message":window.location.href="/employer/messages";break;default:console.warn("Unknown redirect path:",s)}};return e.jsx(H,{isOpen:o,ref:l,"data-testid":"notification-modal",children:t.length>0?t.map(s=>e.jsxs("div",{className:"p-4 border-b",onClick:()=>d(s.data.redirect),children:[e.jsx("button",{onClick:m=>{m.stopPropagation(),p(s.id)},className:"flex justify-self-end text-xs text-gray-400 hover:text-purple-500 transition",children:"âœ•"}),e.jsxs("div",{className:"text-purple-700 flex justify-between items-center",children:[e.jsx("p",{className:"font-semibold",children:s.data.sender_name}),e.jsx("span",{className:"text-xs text-purple-400 ml-2 whitespace-nowrap",children:r(s.created_at)})]}),e.jsx("p",{className:"text-purple-400 truncate max-w-xs text-sm",children:s.data.message})]},s.id)):e.jsx($,{children:"No new notifications"})})});export{Ce as default};
