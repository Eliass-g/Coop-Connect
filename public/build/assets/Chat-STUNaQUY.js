import{u as p,e as m,r as i,E as u,j as e,k as x,l as g}from"./app-BP2DlbBf.js";import{h as f}from"./moment-BH_gi4k_.js";const j=({selectedUser:a})=>{const t=p(),n=m(s=>s.messages.messages),[l,o]=i.useState(""),r=i.useRef(null);i.useEffect(()=>{a&&t(u(a.id))},[a,t]),i.useEffect(()=>{r.current&&(r.current.scrollTop=r.current.scrollHeight)},[n]);const c=async()=>{if(!l.trim())return;const s={receiver_email:a.email,message:l},d={recipient_id:a.id,redirect:"message",message:l};t(x(s)).then(()=>{t(g(d)),o("")})};return e.jsxs("div",{className:"flex flex-col h-full p-4 bg-purple-50 rounded-r-lg",children:[e.jsx("div",{className:"bg-purple-600 text-white p-4 rounded-lg",children:e.jsx("h2",{className:"text-lg font-semibold",children:a.name})}),e.jsx("div",{className:"flex-grow overflow-y-auto p-2",style:{display:"flex",flexDirection:"column"},ref:r,children:n.map(s=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:`inline-block max-w-[70%] p-2 my-2 rounded-lg ${s.sender_id===a.id?"bg-purple-500 text-white self-start":"bg-purple-300 text-white self-end"}`,children:[e.jsx("p",{className:"whitespace-normal break-words",children:s.message}),e.jsx("small",{className:"block pt-0 text-xs opacity-80",children:f(s.created_at).format("MMMM Do YYYY, h:mm:ss a")})]},s.id)}))}),e.jsxs("div",{className:"flex items-center p-2 bg-purple-50",children:[e.jsx("input",{type:"text",className:"flex-grow p-2 border rounded-lg focus:border-purple-500",value:l,onChange:s=>o(s.target.value),placeholder:"Type a message..."}),e.jsx("button",{onClick:c,className:"ml-2 px-4 py-2 bg-purple-500 text-white rounded-lg",children:"Send"})]})]})};export{j as default};
