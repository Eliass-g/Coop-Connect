import{e as M,G as T,u as W,r as h,H as d,j as e,I as H}from"./app-BP2DlbBf.js";import{u as J}from"./index-CXaPWWXl.js";import{LoadingScreen as V,Spinner as G,ProfileWrapper as $,ProfileHeader as q,ProfileSection as K,ProfileContainer as Q,ProfileImageWrapper as X,ProfileImage as D,ClearProfileButton as Y,ProfileBio as Z,BioValue as ee,ProfileDetailItem as i,DetailLabel as u,DetailValue as x,ProfileDetail as se,ProfileDetailOne as re,StatusContainer as ne,StatusLabel as g,StatusRadioButton as f,ProfileDetailTwo as te,SkillsContainer as w,SkillChip as A,AddSkillButton as I,EditProfileButton as le,DropzoneContainer as ae}from"./ProfileForm.styles-DTeHpurx.js";import"./index-DUoLStMl.js";import"./styled-components.browser.esm-WlhnpHHw.js";const ie=({onDrop:p})=>{const{getRootProps:n,getInputProps:a}=J({onDrop:p,accept:{"image/*":[]}});return e.jsxs(ae,{...n(),children:[e.jsx("input",{...a()}),e.jsx("p",{children:"Drop a profile image here"})]})},oe=({user:p})=>{const n=M(T),a=W(),s=!1,r="1em",[k,b]=h.useState(null),[m,C]=h.useState(""),[j,S]=h.useState(""),[y,v]=h.useState(""),[z,P]=h.useState(n.profile_image);h.useEffect(()=>{a(d({...p,skills:p.skills||[],courses:p.courses||[]}))},[a]);const E=async t=>{t.preventDefault();const l=new FormData;l.append("profile_image",z),l.append("name",n.name),l.append("email",n.email),l.append("description",n.description),l.append("skills",JSON.stringify(n.skills)),l.append("courses",JSON.stringify(n.courses)),l.append("status",n.status),l.append("pronouns",n.pronouns),l.append("school",n.school);try{await a(H(l)).unwrap(),v("Changes saved successfully!"),setTimeout(()=>v(""),3e3)}catch(c){console.error("Error updating profile:",c)}},L=t=>{if(t&&t.length>0){const l=t[0];b(URL.createObjectURL(l)),P(l)}},B=()=>{P(null),a(d({profile_image:null}))},o=t=>{const{name:l,value:c}=t.target;a(d({[l]:c}))},F=t=>{C(t.target.value)},N=()=>{if(m.trim()){const t=[...n.skills,m.trim()];a(d({skills:t})),C("")}},R=t=>{const l=n.skills.filter(c=>c!==t);a(d({skills:l}))},U=t=>{S(t.target.value)},_=()=>{if(j.trim()){const t=[...n.courses,j.trim()];a(d({courses:t})),S("")}},O=t=>{const l=n.skills.filter(c=>c!==t);a(d({courses:l}))};return p?e.jsxs($,{fontSize:r,darkMode:s,children:[e.jsxs(q,{fontSize:r,darkMode:s,children:[" ","Edit Profile"]}),e.jsx(K,{fontSize:r,darkMode:s,children:e.jsxs(Q,{fontSize:r,darkMode:s,children:[e.jsx(X,{fontSize:r,darkMode:s,children:k?e.jsx(D,{loading:"lazy",src:k,alt:"Profile"}):n.profile_image?e.jsxs("div",{children:[e.jsx(D,{fontSize:r,darkMode:s,loading:"lazy",src:n.profile_image,alt:"Profile Image"}),e.jsx(Y,{fontSize:r,darkMode:s,onClick:B,children:"Clear"})]}):e.jsx(ie,{fontSize:r,darkMode:s,onDrop:L})}),e.jsx(Z,{fontSize:r,darkMode:s,children:e.jsx(ee,{fontSize:r,darkMode:s,name:"description",value:n.description,onChange:o,placeholder:"Add a few words about yourself..."})})]})}),e.jsxs(i,{fontSize:r,darkMode:s,children:[e.jsx(u,{fontSize:r,darkMode:s,children:"Full Name"}),e.jsx(x,{fontSize:r,darkMode:s,type:"text",name:"name",value:n.name,onChange:o})]}),e.jsxs(se,{fontSize:r,darkMode:s,children:[e.jsxs(re,{children:[e.jsxs(i,{fontSize:r,darkMode:s,children:[e.jsx(u,{fontSize:r,darkMode:s,children:"Email"}),e.jsx(x,{fontSize:r,darkMode:s,type:"email",name:"email",value:n.email,onChange:o})]}),e.jsx(i,{fontSize:r,darkMode:s}),e.jsxs(i,{fontSize:r,darkMode:s,children:[e.jsx(u,{fontSize:r,darkMode:s,children:"School"}),e.jsx(x,{fontSize:r,darkMode:s,type:"text",name:"school",value:n.school,onChange:o})]}),e.jsx(i,{fontSize:r,darkMode:s}),e.jsxs(i,{fontSize:r,darkMode:s,children:[e.jsx(u,{fontSize:r,darkMode:s,children:"Pronouns"}),e.jsx(x,{fontSize:r,darkMode:s,type:"text",name:"pronouns",value:n.pronouns,onChange:o})]}),e.jsxs(i,{fontSize:r,darkMode:s,children:[e.jsx(u,{fontSize:r,darkMode:s,children:"Current Status"}),e.jsxs(ne,{fontSize:r,children:[e.jsxs(g,{fontSize:r,darkMode:s,children:[e.jsx(f,{name:"status",type:"radio",value:"searching",onChange:o,checked:n.status==="searching",darkMode:s}),"Searching"]}),e.jsxs(g,{fontSize:r,darkMode:s,children:[e.jsx(f,{name:"status",type:"radio",value:"interviewing",onChange:o,checked:n.status==="interviewing",darkMode:s}),"Interviewing"]}),e.jsxs(g,{fontSize:r,darkMode:s,children:[e.jsx(f,{name:"status",type:"radio",value:"working",onChange:o,checked:n.status==="working",darkMode:s}),"Working"]})]})]})]}),e.jsxs(te,{children:[e.jsxs(i,{fontSize:r,darkMode:s,children:[e.jsx(u,{fontSize:r,darkMode:s,children:"Skills"}),e.jsxs(w,{fontSize:r,darkMode:s,children:[Array.isArray(n.skills)&&n.skills.length>0?n.skills.map((t,l)=>e.jsxs(A,{fontSize:r,darkMode:s,children:[t,e.jsx("span",{style:{cursor:"pointer",marginLeft:"6px"},onClick:()=>R(t),"data-testid":"remove-skill",children:"✕"})]},l)):e.jsx("p",{children:"No skills added yet."}),e.jsx(x,{fontSize:r,darkMode:s,type:"text",name:"currentSkill",value:m||"",onChange:F,placeholder:"Add a skill...","data-testid":"skill-input"}),e.jsx(I,{fontSize:r,darkMode:s,type:"button",onClick:N,"data-testid":"add-skill-button",children:"Add Skill"})]})]}),e.jsxs(i,{fontSize:r,darkMode:s,children:[e.jsx(u,{fontSize:r,darkMode:s,children:"Courses"}),e.jsxs(w,{fontSize:r,darkMode:s,children:[Array.isArray(n.courses)&&n.courses.length>0?n.courses.map((t,l)=>e.jsxs(A,{fontSize:r,darkMode:s,children:[t,e.jsx("span",{style:{cursor:"pointer",marginLeft:"6px"},onClick:()=>O(t),children:"✕"})]},l)):e.jsx("p",{children:"No courses added yet."}),e.jsx(x,{fontSize:r,darkMode:s,type:"text",name:"currentCourse",value:j,onChange:U,placeholder:"Add a course...","data-testid":"course-input"}),e.jsx(I,{fontSize:r,darkMode:s,type:"button",onClick:_,children:"Add Course"})]})]})]})]}),e.jsx(le,{fontSize:r,darkMode:s,onClick:E,children:"Save Profile Changes"}),y&&e.jsx("p",{style:{color:"green",marginTop:"10px",fontSize:"0.9em"},children:y})]}):e.jsx(V,{children:e.jsx(G,{})})},xe=oe;export{xe as default};
